<!DOCTYPE html>
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>4DKK Web Test</title> 
</head>
<script type="text/javascript" src="Protocol.js" charset="utf-8"></script>
<script type="text/javascript" src="DevCtrl.js" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">

	window.onload = function()
	{
		autoFormFuncsCheckbox();
		setRespCallback(devRespCallback);
		refreshStatus();
//测试创建文件夹
// var testdirpath = "/mnt/DCIM/tmp/tmp";
// var tmp;
// for (var i = 0; i < 100; i++){
// 	tmp = "" + i;
// 	while(tmp.length < 4){
// 		tmp = "0" + tmp;
// 	}
// 	// console.log((testdirpath + tmp));
// 	createDir((testdirpath + tmp));
// }
		
// reqGetAeParams();
// getNowTimeStamp();
// reqGetDateTime();
// reqGetTimezone();
// reqGetStaInfo();
// reqGetApInfo();
// reqGetResolution();
// reqGetCurLensIndex();
	}

	function refreshStatus()
	{
		reqDevInfo();
		reqDevState();
		reqDevStatus();
	}

/*----- /osc/info start -----*/
	function reqDevInfo()
	{
		console.log("reqDevInfo");
		getDevInfo();
	}

	function respDevInfo(jsonObj)
	{
		console.log("respDevInfo");
		var dev_info = document.getElementById("dev_info");
		dev_info.innerHTML = JSON.stringify(jsonObj);
	}
/*----- /osc/info end -----*/

/*----- /osc/state start -----*/
	function reqDevState()
	{
		console.log("reqDevState");
		getDevState();
	}

	function respDevState(jsonObj)
	{
		console.log("respDevState");
		var dev_state = document.getElementById("dev_state");
		dev_state.innerHTML = JSON.stringify(jsonObj);
	}
/*----- /osc/state end -----*/

/*----- /osc/commands/status start -----*/
	function reqDevStatus()
	{
		console.log("reqDevStatus");
		getDevStatus();
	}

	function respDevStatus(jsonObj)
	{
		console.log("respDevStatus");
		var dev_status = document.getElementById("dev_status");
		dev_status.innerHTML = JSON.stringify(jsonObj);
	}
/*----- /osc/commands/status end -----*/

/*----- 图片弹出框 start -----*/
	function onClickView(filename, fileurl){
		var modal = document.getElementById('myModal');
		var img = document.getElementById('myImg');
		var modalImg = document.getElementById("img01");
		var captionText = document.getElementById("caption");
		modal.style.display = "block";
		modalImg.src = fileurl;
		captionText.innerHTML = filename;
	}
 
	// 当点击 (x), 关闭弹窗
	function onClickImgClose() { 
		var modal = document.getElementById('myModal');
		modal.style.display = "none";
	}
/*----- 图片弹出框 end -----*/

/*----- 设备返回 start -----*/
	function devRespCallback(strJsonResult)
	{
		console.log("devRespCallback - " + strJsonResult);
		var jsonObj = JSON.parse(strJsonResult);
		if(jsonObj != null)
		{
			var name = jsonObj.name;
			if(name == null || "" == name)
			{
				//maybe /osc/info, /osc/state
				var manufacturer = jsonObj[OSC_JTAG_INFO_MANUFACTURER];
				if(manufacturer != null && "" != manufacturer)
				{
					respDevInfo(jsonObj);
				}

				var batteryLevel = jsonObj[OSC_JTAG_STATE_BATTERYLEVEL];
				if(batteryLevel != null && batteryLevel >= 0)
				{
					respDevState(jsonObj);
				}

				var isCapturing = jsonObj[OSC_JTAG_STATUS_ISCAPTURING];
				if(isCapturing != null && isCapturing >= 0)
				{
					respDevStatus(jsonObj);
				}
				
			}
			else if(name === OSC_CMD_CAPTUREALL || name === OSC_CMD_CAPTUREA || name === OSC_CMD_CAPTUREB || name === OSC_CMD_CAPTURESINGLE
			|| name === OSC_CMD_STARTRECORD || name === OSC_CMD_STOPRECORD
			)
			{
				respCapture(jsonObj);
			}
			else if(name === OSC_CMD_LISTFILES)
			{
				respListFiles(jsonObj);
			}
			else if(name === OSC_CMD_DELETE)
			{
				respDeleteFile(jsonObj);
			}
			else if(name === OSC_CMD_CREATEDIR)
			{
				respCreateDir(jsonObj);
			}
			else if(name === OSC_CMD_FINDFILE)
			{
				respFindFile(jsonObj);

			}
			else if(name === OSC_CMD_GETLIVEPREVIEWURL)
			{
				respGetLivePreviewUrl(jsonObj);
			}
			else if(name === OSC_CMD_GETIMUDATA)
			{
				respGetIMUData(jsonObj);
			}
			else if(name === OSC_CMD_REBOOT)
			{
				respReboot(jsonObj);
			}
			else if(name === OSC_CMD_SHUTDOWN)
			{
				respShutdown(jsonObj);
			}
			else if(name === OSC_CMD_LISTACCESSPOINTS)
			{
				respListAccessPoints(jsonObj);
			}
			else if(name === OSC_CMD_SETMESURELIGHT)
			{
				respSetMesureLight(jsonObj);
			}
			else if(name === OSC_CMD_RESETCAMINDEX)
			{
				respResetCamIndex(jsonObj);
			}
			else if(name === OSC_CMD_FORMAT)
			{
				respFormat(jsonObj);
			}
			else if(name === OSC_CMD_KEEPALIVE)
			{
				respKeepAlive(jsonObj);
			}
			else if(name === OSC_CMD_STREAMRATE)
			{
				respStreamRate(jsonObj);
			}
			else if(name === OSC_CMD_POST)
			{
				respGoPOST(jsonObj);
			}
			else if(name === OSC_CMD_SET_WIFIBAND)
			{
				respSetWifiBand(jsonObj);
			}
			else if(name === OSC_CMD_GET_WIFIBAND)
			{
				respGetWifiBand(jsonObj);
			}
			else if(name === OSC_CMD_GETOPTIONS)
			{
				var options = jsonObj.results.options;
				var optionname;
				for(optionname in options)
				{
					break;
				}
				console.log("optionname - " + optionname);
				
				if(optionname === OSC_OPT_AEPARAMS)
				{
					respGetAEParams(options[optionname]);
				}
				else if(optionname === OSC_OPT_DATETIME)
				{
					respGetDateTime(options[optionname]);
				}
				else if(optionname === OSC_OPT_TIMEZONE)
				{
					respGetTimezone(options[optionname]);
				}
				else if(optionname === OSC_OPT_STAINFO)
				{
					respGetStaInfo(options[optionname]);
				}
				else if(optionname === OSC_OPT_APINFO)
				{
					respGetApInfo(options[optionname]);
				}
				else if(optionname === OSC_OPT_RESOLUTION)
				{
					respGetResolution(options[optionname]);
				}
				else if(optionname === OSC_OPT_OFFDELAY)
				{
					respGetOffDelay(options[optionname]);
				}
			}
			else if(name === OSC_CMD_SETOPTIONS)
			{
				if(gTagSetSta == 1)
				{
					respSetStaInfo(jsonObj);
				}
				else if(gTagSetStaOff == 1)
				{
					respDisconnectSta(jsonObj);
				}
				else if(gTagSetAp == 1)
				{
					respSetApInfo(jsonObj);
				}
				else if(jsonObj.state === OSC_JTAG_STATE_DONE)
				{
					alert("set success");
				}
				else
				{
					alert("set err, code:" + jsonObj.error.code);
				
				}
			}
		}
	}
/*----- 设备返回 end -----*/

/*----- 功能checkbox start -----*/

	function autoFormFuncsCheckbox()
	{
		console.log("autoFormFuncsCheckbox");
		var div_checkbox_functions = document.getElementById("checkbox_functions");
		div_checkbox_functions.innerHTML = "";
		var functionsItem = document.getElementById("functions").childNodes;
		var len = functionsItem.length;
		//console.log("len:" + len);
		var mNode;
		var tmpTagName;
		var tmpID;
		var innerTxt = "";
		var tmpStyle;
		var tmpDisplay;
		for(var i = 0; i < len; i++)
		{
			// if(i != 3){
			// 	continue;
			// }
			mNode = functionsItem[i];
			tmpTagName = mNode.tagName;
			tmpID = mNode.id;

			// display = mNode.style["display"];

			// for(var key in mNode)
			// {
				
			// 	// console.log("[" + i + "]:" + key + " " + mNode[key] + " " + mNode.style); 
			// 	var tmpobj = mNode.style;
			// 	for(var key1 in tmpobj)
			// 	{
			// 		if(key1 === "display"){
			// 			console.log("[" + i + "]:::" + key1 + " " + tmpobj[key1]); 
			// 		}
			// 	}
				
			// }


			if(tmpTagName === "DIV")
			{
				tmpStyle = mNode.style;
				// for(var key1 in tmpStyle)
				// {
				// 	if(key1 === "display"){
				// 		console.log("[" + i + "]:::" + key1 + " " + tmpStyle[key1]); 
				// 		tmpDisplay = tmpStyle[key1];
				// 		break;
				// 	}
				// }
				tmpDisplay = tmpStyle["display"];
				if(tmpDisplay === "none")
				{
					innerTxt += "<input type=\"checkbox\" name=\"category\" value=\"" + tmpID + "\" onchange=\"funcCheckboxChange(this)\"/>" + tmpID + "</br>";
				}
				else
				{
					innerTxt += "<input type=\"checkbox\" name=\"category\" value=\"" + tmpID + "\" checked=\"checked\" onchange=\"funcCheckboxChange(this)\"/>" + tmpID + "</br>";
				}
			}
		}

		//添加全不选按钮
		innerTxt += "<br/><div><button class=\"functionbtn\" onclick=\"clearFuncCheckbox()\">clear</button>&nbsp;&nbsp;<button class=\"functionbtn\" onclick=\"refreshStatus()\">RefreshStatus</button></div>";

		div_checkbox_functions.innerHTML = innerTxt;
	}

	function funcCheckboxChange(divItem)
	{
		console.log("funcCheckboxChange() - " + divItem.value + " " + divItem.checked);
		var funcItem = document.getElementById(divItem.value);
		//console.log("funcCheckboxChange() - " + funcItem);
		if(divItem.checked == true)
		{
			funcItem.style["display"] = "block";
		}
		else
		{
			funcItem.style["display"] = "none";
		}

	}

	function clearFuncCheckbox()
	{
		console.log("clearFuncCheckbox()");
		var div_checkbox_functions = document.getElementById("checkbox_functions");
		
		var functionsItem = document.getElementById("functions").childNodes;
		var len = functionsItem.length;
		var mNode;
		var tmpTagName;
		var tmpStyle;

		for(var i = 0; i < len; i++)
		{
			mNode = functionsItem[i];
			tmpTagName = mNode.tagName;

			if(tmpTagName === "DIV")
			{
				tmpStyle = mNode.style;
				tmpStyle["display"] = "none";
			}
		}

		var inputs = div_checkbox_functions.childNodes;
		for(var i = 0; i < inputs.length; i++)
		{
			mNode = inputs[i];
			tmpTagName = mNode.tagName;
			if(tmpTagName === "INPUT")
			{
				mNode.checked = "";
			}
		}

	}

/*----- 功能checkbox end -----*/

/*----- captureall capturea captureb capturesingle startrecord stoprecord start -----*/
	function reqCapture(functionid)
	{
		console.log("reqCapture:" + functionid);
		var path;
		var pathItem;
		var hdrItem;
		var resultItem;
		if(functionid === OSC_CMD_CAPTUREALL || functionid === OSC_CMD_CAPTURESINGLE || functionid === OSC_CMD_CAPTUREA || functionid === OSC_CMD_STARTRECORD)
		{
			resultItem = document.getElementById(functionid + "_result");
			pathItem   = document.getElementById(functionid + "_path");
		}
		else if (functionid === OSC_CMD_CAPTUREB)
		{
			resultItem = document.getElementById(OSC_CMD_CAPTUREA + "_result");
			pathItem   = document.getElementById(OSC_CMD_CAPTUREA + "_path");
		}
		else if (functionid === OSC_CMD_STOPRECORD)
		{
			resultItem = document.getElementById(OSC_CMD_STARTRECORD + "_result");
			pathItem   = document.getElementById(OSC_CMD_STARTRECORD + "_path");
		}
		path = pathItem.value;
		console.log("path:" + path);
		resultItem.innerHTML = "<span class=\"paramvalue_ing\">capturing...</span>";

		if(functionid === OSC_CMD_CAPTUREALL)
		{
			var hdrSelect = document.getElementById(OSC_CMD_CAPTUREALL + "_hdr");
			var hdr = hdrSelect.selectedIndex;
			console.log("hdr:" + hdr + " type:" + typeof(hdr));
			captureAll(path, hdr);
		}
		else if(functionid === OSC_CMD_CAPTURESINGLE)
		{
			var nLensSelect = document.getElementById(OSC_CMD_CAPTURESINGLE + "_nLens");
			var nLens = nLensSelect.selectedIndex;
			console.log("nLens:" + nLens + " type:" + typeof(nLens));
			captureSingle(path, nLens);
		}
		else if (functionid === OSC_CMD_CAPTUREA || functionid === OSC_CMD_CAPTUREB)
		{
			if (functionid === OSC_CMD_CAPTUREA)
			{
				var hdrSelect = document.getElementById(OSC_CMD_CAPTUREA + "_hdr");
				var hdr = hdrSelect.selectedIndex;
				console.log("hdr:" + hdr + " type:" + typeof(hdr));
				captureA(path, hdr);
			}
			else
			{
				captureB(path);
			}
		}
		else if(functionid === OSC_CMD_STARTRECORD)
		{
			startRecord(path);
		}
		else if(functionid === OSC_CMD_STOPRECORD)
		{
			stopRecord();
		}
		reqDevStatus();
	}

	function respCapture(jsonObj)
	{
		console.log("respCapture");
		var resultView = document.getElementById(jsonObj.name + "_result");
		if(jsonObj.name === OSC_CMD_CAPTUREB)
		{
			resultView = document.getElementById(OSC_CMD_CAPTUREA + "_result");
		}
		if(jsonObj.name === OSC_CMD_STOPRECORD)
		{
			resultView = document.getElementById(OSC_CMD_STARTRECORD + "_result");
		}
		if(jsonObj.state === OSC_JTAG_STATE_DONE)
		{
			var resultStr = "<ul>";
			var i = 0;
			var tmpFileName;
			var tmpFileUrl;
			for(i = 0; i < 8; i++)
			{
				tmpFileName = jsonObj.results["filename"+i];
				if(tmpFileName == null || tmpFileName === "")
				{
					continue;
				}
				tmpFileUrl  = OSC_DEV_IP + tmpFileName;
				resultStr += "<li>";
				resultStr += "<a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"onClickView('" + tmpFileName + "','" + tmpFileUrl + "')\">" + tmpFileName + "</a>";
				resultStr += "&nbsp;&nbsp;<a class=\"resultvalue\" href=\"" + tmpFileUrl +" \" target =\"_blank\">(download)</a>";
				resultStr += "</li>";
			}
			for(i = 0; i < 3; i++)
			{
				tmpFileName = jsonObj.results["stitchfile"+i];
				if(tmpFileName == null || tmpFileName === "")
				{
					continue;
				}
				tmpFileUrl  = OSC_DEV_IP + tmpFileName;
				resultStr += "<li>";
				resultStr += "<a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"onClickView('" + tmpFileName + "','" + tmpFileUrl + "')\">" + tmpFileName + "</a>";
				resultStr += "&nbsp;&nbsp;<a class=\"resultvalue\" href=\"" + tmpFileUrl +" \" target =\"_blank\">(download)</a>";
				resultStr += "</li>";
			}

			var tmpPathValue = jsonObj.results[OSC_JTAG_PATH];
			if(tmpPathValue != null && tmpPathValue !== "")
			{
				tmpFileUrl  = OSC_DEV_IP + tmpPathValue;
				resultStr += "<li>";
				//录像的path只能下载，不能预览
				if(jsonObj.name === OSC_CMD_STOPRECORD || jsonObj.name === OSC_CMD_STARTRECORD)
				{
					resultStr += "<a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"\">" + tmpPathValue + "</a>";
					resultStr += "&nbsp;&nbsp;<a class=\"resultvalue\" href=\"" + tmpFileUrl +" \" target =\"_blank\">(download)</a>";
				}
				else
				{
					resultStr += "<a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"onClickView('" + tmpPathValue + "','" + tmpFileUrl + "')\">" + tmpPathValue + "</a>";
					resultStr += "&nbsp;&nbsp;<a class=\"resultvalue\" href=\"" + tmpFileUrl +" \" target =\"_blank\">(download)</a>";
				}
				resultStr += "</li>";
			}
			//录像结束，加上时间
			if(jsonObj.name === OSC_CMD_STOPRECORD)
			{
				resultStr += "<li>";
				resultStr += "<span class=\"resultvalue\">" + OSC_JTAG_TIME +  ":" + jsonObj.results[OSC_JTAG_TIME] + "</span>"
				resultStr += "</li>";
			}

			resultStr += "</ul>";
			resultView.innerHTML = resultStr;
			reqDevStatus();
		}
		else
		{
			alert(jsonObj.name + " -- " + jsonObj.error.code);
			resultView.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}

	}
/*----- captureall capturea captureb capturesingle startrecord stoprecord end -----*/

/*----- listFiles delete createDir start -----*/

	function getFileType(filename)
	{
		var pos = filename.lastIndexOf(".");
		return filename.substring(pos+1);
	}

	function formatNumWitmComma(num) {
		var num = (num || 0).toString(), result = '';
		while (num.length > 3) 
		{
			result = ',' + num.slice(-3) + result;
			num = num.slice(0, num.length - 3);
		}
		if (num) 
		{
			result = num + result; 
		}
		return result;
	}

	function reqListFiles()
	{
		console.log("reqListFiles");
		var path;
		var pathItem;
		var resultItem;
		pathItem   = document.getElementById("camera.listFiles_path");
		resultItem = document.getElementById("camera.listFiles_result");
		path = pathItem.value;
		console.log("path:" + path);
		resultItem.innerHTML = "<span class=\"paramvalue_ing\">listing...</span>";
		listFiles(path);
	}

	function respListFiles(jsonObj)
	{
		console.log("respListFiles");
		var resultView = document.getElementById(jsonObj.name + "_result");
		if(jsonObj.state === OSC_JTAG_STATE_DONE)
		{
			var rtnPath = jsonObj.results.path;
			var rtnCount = jsonObj.results.count;
			var rtnIndex = jsonObj.results.index;
			var pageIndex = parseInt(rtnIndex/10) + 1;
			var pageCount = Math.ceil(rtnCount/10);
			console.log("rtnCount:" + rtnCount + " rtnIndex:" + rtnIndex + " pageIndex:" + pageIndex + " pageCount:" + pageCount);
			document.getElementById("camera.listFiles_path").value = rtnPath;

			var resultStr = "<ul>";
			
			//添加返回按钮
			if(rtnPath !== "/mnt/DCIM")
			{
				var pos = rtnPath.lastIndexOf("/");
				var lastPath = rtnPath.substring(0, pos);
				console.log("last path:" + lastPath);
				resultStr += "<li><a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"listFiles('" + lastPath + "')\"><-BACK</a></li>";
			}

			var arrayLen = 0;
			for (var tmpFile in jsonObj.results.files) {
				arrayLen++;
			}
			console.log("arrayLen:" + arrayLen);

			//文件数量
			resultStr += "<li><span class=\"resultvalue\">index:" + rtnIndex + " aryLen:" + arrayLen + " count:" + jsonObj.results.count + "</span></li>";
			//遍历文件
			var i = 0;
			var tmpFile;
			var tmpFileName;
			var tmpFilePath;
			var tmpFileType;
			var tmpFileTypeName;
			var tmpFileUrl;
			var tmpFileSize;
			

			for(i = 0; i < arrayLen; i++)
			{
				tmpFile = jsonObj.results.files[i];
				if (tmpFile == null) 
				{
					continue;
				}
				tmpFileName = tmpFile.name;
				tmpFilePath = rtnPath + "/" + tmpFileName;
				tmpFileSize = tmpFile.size;
				tmpFileType = tmpFile.type;
				if(tmpFileType == OSC_FILE_TYPE_FILE)
				{
					tmpFileUrl = OSC_DEV_IP + tmpFilePath;
				}
				else
				{
					tmpFileUrl = "";
				}
//console.log("[tmpFileName:" + tmpFileName + "][tmpFilePath:" + tmpFilePath + "][tmpFileSize:" + tmpFileSize + "][tmpFileType:" + tmpFileType + "][tmpFileUrl:" + tmpFileUrl + "]");
				resultStr += "<li>";
				//====第一部分=== 文件路径
				//图片，点击路径可以直接显示预览
				tmpFileTypeName = getFileType(tmpFileName);
				if(tmpFileTypeName === "jpg" || tmpFileTypeName === "JPG" || tmpFileTypeName === "jpeg" || tmpFileTypeName === "JPEG" || tmpFileTypeName === "png" || tmpFileTypeName === "PNG")
				{
					resultStr += "<a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"onClickView('" + tmpFilePath + "','" + tmpFileUrl + "')\">" + tmpFileName + "</a>";
				}
				//文件夹，点击路径可以直接跳转到子文件夹
				else if(tmpFileType === OSC_FILE_TYPE_DIR)
				{
					resultStr += "<a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"listFiles('" + tmpFilePath + "')\">" + tmpFileName + "</a>";
				}
				//其它文件点击没有效果
				else
				{
					resultStr += "<a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"\">" + tmpFileName + "</a>";
				}

				//====第②部分=== 文件大小和下载
				if(tmpFileType === OSC_FILE_TYPE_DIR)
				{
					//文件夹不用加
				}
				else
				{
					resultStr += "&nbsp;&nbsp;&nbsp;&nbsp;<a class=\"resultvalue\" href=\"" + tmpFileUrl +" \" target =\"_blank\">(" + formatNumWitmComma(tmpFileSize) + "B↓)</a>";
				}

				//====第③部分=== 删除按钮
				resultStr += "&nbsp;&nbsp;&nbsp;&nbsp;<a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"reqDeleteFile('" + tmpFilePath + "')\">Delete</a>";
					
				resultStr += "</li>";
			}

			//补充页码信息
			var pageinfo = "<li>";
			//补充上一页
			if (pageIndex > 1) {
				pageinfo += "<a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"listFiles('" + rtnPath + "'," + (pageIndex-1-1) * 10 + " ," + 10 + ")\"> <-- </a>";
			}

			pageinfo += "&nbsp;&nbsp;<span class=\"resultvalue\">" + pageIndex + "/" + pageCount + "</span>&nbsp;&nbsp;";

			if (pageIndex < pageCount) {
				pageinfo += "<a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"listFiles('" + rtnPath + "'," + pageIndex * 10 + " ," + 10 + ")\"> --> </a>";
			}

			pageinfo += "</li>";

			resultStr += pageinfo;
			resultStr += "</ul>";
			resultView.innerHTML = resultStr;
			//console.log("resultStr:" + resultStr);
		}
		else
		{
			alert(jsonObj.name + " -- " + jsonObj.error.code);
			resultView.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
	}
	
	function reqDeleteFile(path)
	{
		console.log("reqDeleteFile");
		var r = confirm("Are you sure to remove " + path + "?");
		if(r == true)
		{
			deleteFile(path);
		}
		else
		{

		}
	}
	
	function respDeleteFile(jsonObj)
	{
		console.log("respDeleteFile");

		var resultView = document.getElementById(OSC_CMD_LISTFILES + "_result");

		if(jsonObj.state === OSC_JTAG_STATE_DONE)
		{
			var path = jsonObj.results.path;
			if(path !== "/mnt/DCIM")
			{
				var pos = path.lastIndexOf("/");
				path = path.substring(0, pos);
				console.log("last path:" + path);
				listFiles(path);
			}
			else
			{
				listFiles(path);
			}
			
		}
		else
		{
			alert(jsonObj.name + " -- " + jsonObj.error.code);
			resultView.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}

	}

	function reqCreateDir()
	{
		console.log("reqCreateDir");
		var path;
		var pathItem;
		var resultItem;
		pathItem   = document.getElementById("camera.listFiles_path");
		resultItem = document.getElementById("camera.listFiles_result");
		path = pathItem.value;
		console.log("path:" + path);
		resultItem.innerHTML = "<span class=\"paramvalue_ing\">creating...</span>";
		createDir(path);
	}

	function respCreateDir(jsonObj)
	{
		console.log("respCreateDir");

		var resultView = document.getElementById(OSC_CMD_LISTFILES + "_result");

		if(jsonObj.state === OSC_JTAG_STATE_DONE)
		{
			var path = jsonObj.results.path;
			listFiles(path);
		}
		else
		{
			alert(jsonObj.name + " -- " + jsonObj.error.code);
			resultView.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
	}

	function fillPath()
	{
		var path = document.getElementById(OSC_CMD_LISTFILES + "_path").value;
		document.getElementById(OSC_CMD_CAPTUREALL + "_path").value = path;
		document.getElementById(OSC_CMD_CAPTUREA + "_path").value = path;
		document.getElementById(OSC_CMD_CAPTURESINGLE + "_path").value = path;
		document.getElementById(OSC_CMD_STARTRECORD + "_path").value = path;
	}

/*----- listFiles delete createDir end -----*/

/*----- findFile start -----*/
	function reqFindFile()
	{
		console.log("reqFindFile");
		var path;
		var pathItem;
		var resultItem;
		pathItem   = document.getElementById("camera._findFile_path");
		resultItem = document.getElementById("camera._findFile_result");
		path = pathItem.value;
		console.log("find file path:" + path);
		resultItem.innerHTML = "<span class=\"paramvalue_ing\">finding...</span>";
		findFile(path);
	}

	function respFindFile(jsonObj)
	{
		console.log("respFindFile");

		var resultView = document.getElementById(OSC_CMD_FINDFILE + "_result");

		if(jsonObj.state === OSC_JTAG_STATE_DONE)
		{
			resultView.innerHTML = "<span class=\"paramvalue_ing\">file exists</span>";
		}
		else
		{
			resultView.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
	}
/*----- findFile end -----*/

/*----- _aeParams start -----*/

	function manualModeChange(value)
	{
		console.log("manualModeChange:" + value + " type:" + typeof(value));
		var div__aeParams_expMode = document.getElementById("div__aeParams_expMode");
		var div__aeParams_iso = document.getElementById("div__aeParams_iso");
		var div__aeParams_compensation = document.getElementById("div__aeParams_compensation");
		var div__aeParams_expTime = document.getElementById("div__aeParams_expTime");
		var div__aeParams_colorTempratureManualMode = document.getElementById("div__aeParams_colorTempratureManualMode");
		var div__aeParams_colorTemprature = document.getElementById("div__aeParams_colorTemprature");

		if(value == 0)
		{
			div__aeParams_expMode.style["display"] = "none";
			div__aeParams_iso.style["display"] = "none";
			div__aeParams_compensation.style["display"] = "none";
			div__aeParams_expTime.style["display"] = "none";
			div__aeParams_colorTempratureManualMode.style["display"] = "none";
			div__aeParams_colorTemprature.style["display"] = "none";
		}
		else
		{
			div__aeParams_expMode.style["display"] = "block";

			var _aeParams_expMode = document.getElementsByName("_aeParams_expMode");
			if(_aeParams_expMode[1].checked == true)
			{
				div__aeParams_iso.style["display"] = "block";
				div__aeParams_expTime.style["display"] = "block";
			}
			else
			{
				div__aeParams_compensation.style["display"] = "block";
			}

			div__aeParams_colorTempratureManualMode.style["display"] = "block";

			var _aeParams_colorTempratureManualMode = document.getElementsByName("_aeParams_colorTempratureManualMode");

		    var colorTempratureManualMode = 0;
			if( _aeParams_colorTempratureManualMode[1].checked == true){
				colorTempratureManualMode = 1;
			}

			console.log("colorTempratureManualMode -- " + colorTempratureManualMode);

			if(colorTempratureManualMode == 1)
			{
				div__aeParams_colorTemprature.style["display"] = "block";
			}
			else
			{
				div__aeParams_colorTemprature.style["display"] = "none";	
			}
		}
	}

	function expModeChange(value)
	{
		console.log("expModeChange:" + value + " type:" + typeof(value));
		var div__aeParams_iso = document.getElementById("div__aeParams_iso");
		var div__aeParams_compensation = document.getElementById("div__aeParams_compensation");
		var div__aeParams_expTime = document.getElementById("div__aeParams_expTime");

        var _aeParams_manualMode = document.getElementsByName("_aeParams_manualMode");

        if(_aeParams_manualMode[1].checked == true)
        {
        	//manualMode打开了再显示
			if(value == 1)
			{
				div__aeParams_compensation.style["display"] = "none";
				div__aeParams_iso.style["display"] = "block";
				div__aeParams_expTime.style["display"] = "block";
			}
			else
			{
				div__aeParams_compensation.style["display"] = "block";
				div__aeParams_iso.style["display"] = "none";
				div__aeParams_expTime.style["display"] = "none";
			}
		}
	}

	function compensationSliderChange(value)
	{
		// console.log("compensationSliderChange:" + value);
		document.getElementById("_aeParams_compensationValueText").innerHTML = value;
	}

	function isoSliderChange(value)
	{
		// console.log("compensationSliderChange:" + value);
		document.getElementById("_aeParams_isoValueText").innerHTML = value;
	}

	function colorTempratureSliderChange(value)
	{
		// console.log("compensationSliderChange:" + value);
		// if(value === "1999")
		// {
		// 	document.getElementById("_aeParams_colorTempratureValueText").innerHTML = "0";
		// }
		// else
		// {
			document.getElementById("_aeParams_colorTempratureValueText").innerHTML = value;
		// }
		
	}

	function colorTempratureManualModeChange(value)
	{
		console.log("colorTempratureManualModeChange:" + value);
		var _aeParams_manualMode = document.getElementsByName("_aeParams_manualMode");

        if(_aeParams_manualMode[1].checked == true)
        {
			if(value == 0)
			{
				div__aeParams_colorTemprature.style["display"] = "none";
			}
			else
			{
				div__aeParams_colorTemprature.style["display"] = "block";
			}
		}
	}

	function expTimeChange()
	{
		var _aeParams_expTime = document.getElementById("_aeParams_expTime");
		var index = 0;
		for (var i = 0; i < _aeParams_expTime.options.length; i++){  
			if (_aeParams_expTime.options[i].selected == true){  
				index = i;
				break;  
			}  
		} 
		
		var _aeParams_expTimeValue = document.getElementById("_aeParams_expTimeValue");
		_aeParams_expTimeValue.options[index].selected = true;
	}

	function reqGetAeParams()
	{
		getAEParams();
	}

	function respGetAEParams(jsonObj)
	{
		console.log("respGetAeParams");
		var manualMode = jsonObj[OSC_JTAG_AE_MANUALMODE];
		var expMode = jsonObj[OSC_JTAG_AE_EXPMODE]
		var iso = jsonObj[OSC_JTAG_AE_ISO];
		var compensation = jsonObj[OSC_JTAG_AE_COMPENSATION];
		var expTimeValue = jsonObj[OSC_JTAG_AE_EXPTIMEVALUE];
		var expTime      = jsonObj[OSC_JTAG_AE_EXPTIME];
		
		var colorTempratureManualMode = jsonObj[OSC_JTAG_AE_COLORTEMPMANUALMODE];
		var colorTemprature = jsonObj[OSC_JTAG_AE_COLORTEMPRATURE];

		console.log(
			"[manualMode:" + manualMode + "]" +
			"[expMode:" + expMode + "]" +
			"[iso:" + iso + "]" +
			"[compensation:" + compensation + "]" +
			"[expTimeValue:" + expTimeValue + "]" +
			"[expTime:" + expTime + "]" +
			"[colorTempratureManualMode:" + colorTempratureManualMode + "]" +
			"[colorTemprature:" + colorTemprature + "]"
		);

		//radio 要用 name来分组
		var _aeParams_manualMode = document.getElementsByName("_aeParams_manualMode");
		_aeParams_manualMode[manualMode].checked = true;
		manualModeChange(manualMode);

		//expMode
		var _aeParams_expMode = document.getElementsByName("_aeParams_expMode");
		_aeParams_expMode[expMode].checked = true;
		expModeChange(expMode);

		//iso
		var _aeParams_isoSlider = document.getElementById("_aeParams_isoSlider");
		_aeParams_isoSlider.value = iso;
		isoSliderChange(iso);

		//compensation
		var _aeParams_compensationSlider = document.getElementById("_aeParams_compensationSlider");
		_aeParams_compensationSlider.value = compensation;
		compensationSliderChange(compensation);

		//expTime
		var _aeParams_expTime = document.getElementById("_aeParams_expTime");
		for (var i = 0; i < _aeParams_expTime.options.length; i++){  
			if (_aeParams_expTime.options[i].innerHTML == expTime){  
				_aeParams_expTime.options[i].selected = true;  
				break;  
			}  
		} 
		
		var _aeParams_expTimeValue = document.getElementById("_aeParams_expTimeValue");
		for (var i = 0; i < _aeParams_expTimeValue.options.length; i++){  
			if (_aeParams_expTimeValue.options[i].value == expTimeValue){  
				_aeParams_expTimeValue.options[i].selected = true;  
				break;  
			}  
		}  

		//colorTemprature
		var _aeParams_colorTempratureManualMode = document.getElementsByName("_aeParams_colorTempratureManualMode");

		_aeParams_colorTempratureManualMode[colorTempratureManualMode].checked = true;

		colorTempratureManualModeChange(colorTempratureManualMode);

		var _aeParams_colorTempratureSlider = document.getElementById("_aeParams_colorTempratureSlider");
		_aeParams_colorTempratureSlider.value = colorTemprature;
		colorTempratureSliderChange(colorTemprature);

	}

	function reqSetAEParams()
	{
		//manualMode
		var _aeParams_manualMode = document.getElementsByName("_aeParams_manualMode");
		var manualMode = 0;
		if( _aeParams_manualMode[1].checked == true){
			manualMode = 1;
		}

		//expMode
		var _aeParams_expMode = document.getElementsByName("_aeParams_expMode");
		var expMode = 0;
		if( _aeParams_expMode[1].checked == true){
			expMode = 1;
		}

		//iso
		var _aeParams_isoSlider = document.getElementById("_aeParams_isoSlider");
		var iso = _aeParams_isoSlider.value;
		iso = Number(iso);

		//compensation
		var _aeParams_compensationSlider = document.getElementById("_aeParams_compensationSlider");
		var compensation = _aeParams_compensationSlider.value;
		compensation = Number(compensation);

		//expTime
		var _aeParams_expTimeValue = document.getElementById("_aeParams_expTimeValue");
		var expTimeValue = 0;
		for (var i = 0; i < _aeParams_expTimeValue.options.length; i++){  
			if(_aeParams_expTimeValue.options[i].selected == true){
				expTimeValue = _aeParams_expTimeValue.options[i].value;
				break;
			}
		}
		expTimeValue = Number(expTimeValue);

		//colorTemprature
		var _aeParams_colorTempratureSlider = document.getElementById("_aeParams_colorTempratureSlider");
		var colorTemprature = _aeParams_colorTempratureSlider.value;

		var _aeParams_colorTempratureManualMode = document.getElementsByName("_aeParams_colorTempratureManualMode");
	    var colorTempratureManualMode = 0;
		if( _aeParams_colorTempratureManualMode[1].checked == true){
			colorTempratureManualMode = 1;
		}

		colorTemprature = Number(colorTemprature);

		setAEParams(manualMode, expMode, compensation, expTimeValue, iso, colorTempratureManualMode, colorTemprature);
	}

/*----- _aeParams end -----*/

/*----- _dateTime _timeZone Start -----*/
	function getNowTimeStamp()
	{
		var input_dateTime_timestamp = document.getElementById("_dateTime_timestamp");
		input_dateTime_timestamp.value = Math.round(new Date() / 1000);
		var span_dateTime_timestamp_date = document.getElementById("_dateTime_timestamp_date");
		span_dateTime_timestamp_date.innerHTML = getCurrentTime();
	}

	function reqGetDateTime()
	{
		console.log("reqGetDateTime");
		getDateTime();
	}

	function respGetDateTime(jsonObj)
	{
		console.log("respGetDateTime");
		var year = jsonObj[OSC_JTAG_TM_YEAR];
		var month = jsonObj[OSC_JTAG_TM_MONTH];
		var day   = jsonObj[OSC_JTAG_TM_DAY];
		var hour  = jsonObj[OSC_JTAG_TM_HOUR];
		var minute = jsonObj[OSC_JTAG_TM_MINUTE];
		var second = jsonObj[OSC_JTAG_TM_SECOND];
		var txt = year + "-" + month + "-" + day + " " + hour + ":" + minute + ":" + second;
		console.log("txt:" + txt);
		var span_dateTime_devicedatetime = document.getElementById("_dateTime_devicedatetime");
		span_dateTime_devicedatetime.innerHTML = txt;
	}

	function reqSetDateTime()
	{
		console.log("reqSetDateTime");
		var input_dateTime_timestamp = document.getElementById("_dateTime_timestamp");
		var time = input_dateTime_timestamp.value;
		setDateTime(Number(time));
	}

	function reqSetTimezone()
	{
		console.log("reqSetTimezone");
		var select_dateTime_timeZone = document.getElementById("_dateTime_timeZone");
		var index = 0;
		for (var i = 0; i < select_dateTime_timeZone.options.length; i++){  
			if (select_dateTime_timeZone.options[i].selected == true){  
				index = i;
				break;  
			}  
		} 
		console.log("index:" + index);
		setTimeZoneValue(index);
	}

	function reqGetTimezone()
	{
		console.log("reqGetTimezone");
		getTimeZone();
	}

	function respGetTimezone(jsonObj)
	{
		console.log("respGetTimezone");
		var timeZoneValue = jsonObj._timeZone;
		var span_dateTime_devicetimezone = document.getElementById("_dateTime_devicetimezone");
		span_dateTime_devicetimezone.innerHTML = timeZoneValue;
	}

/*----- _dateTime _timeZone end -----*/

/*----- _listAccessPoints Start -----*/

	function reqListAccessPoints()
	{
		console.log("reqListAccessPoints");
		getListAccessPoints();
		var resultItem = document.getElementById("camera._listAccessPoints_result");
		var listItem = document.getElementById("camera._listAccessPoints_list");
		resultItem.innerHTML = "<span class=\"paramvalue_ing\">listing...</span>";
		listItem.innerHTML = "";
	}

	function respListAccessPoints(jsonObj)
	{
		console.log("respListAccessPoints");
		var resultItem = document.getElementById("camera._listAccessPoints_result");
		var listItem = document.getElementById("camera._listAccessPoints_list");
		if(jsonObj.state === OSC_JTAG_STATE_DONE)
		{
			var array = jsonObj.results.list;
			var len = array.length;
			var resultStr = "<ul>";
			var i = 0;

			var tmpSSID;
			var tmpLevel;
			var tmpAUTH;
			var tmpMac;
			for(i = 0; i < len; i++)
			{
				tmpSSID  = array[i][OSC_JTAG_WIFI_SSID];
				tmpLevel = array[i][OSC_JTAG_WIFI_LEVEL];
				tmpAUTH  = array[i][OSC_JTAG_WIFI_AUTH];
				tmpMac   = array[i][OSC_JTAG_WIFI_MAC];
				console.log("[i:" + i + "]" + "[ssid:" + tmpSSID + "]" + "[level:" + tmpLevel + "]" + "[AUTH:" + tmpAUTH + "]" + "[MAC:" + tmpMac + "]");

				resultStr += "<li><a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"reqSetStaInfo('" + tmpSSID + "', '" + tmpMac + "', " + tmpAUTH + ")\">" + tmpSSID + "</a></li>";
			}
			//resultStr += "<li><a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"listFiles('" + lastPath + "')\"><-BACK</a></li>";
			resultStr += "</ul>";
			listItem.innerHTML = resultStr;
			resultItem.innerHTML = "";
		}
		else
		{
			resultItem.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
	}

	var gTagSetSta = 0;
	var gTagSetStaOff = 0;

	function reqSetStaInfo(ssid, mac, auth)
	{

		if(gTagSetSta == 1)
		{
			alert("device is connecting~!");
			return;
		}

		if(gTagSetStaOff == 1)
		{
			alert("device is disconnecting~!");
			return;
		}

		console.log("reqSetStaInfo " + ssid + " " + mac + " " + auth);
		var password;
		if(auth > 0)
		{
			password = prompt("Please enter \"" + ssid + "\"'s password'", "");
			console.log("reqSetStaInfo --- password:" + password);
		}

		gTagSetSta = 1;
		var resultItem = document.getElementById("camera._listAccessPoints_result");
		resultItem.innerHTML = "<span class=\"paramvalue_ing\">connecting wifi \"" + ssid + "\"</span>";

		setStaInfo(1, ssid, password, mac, auth);

	}

	function respSetStaInfo(jsonObj)
	{
		gTagSetSta = 0;
		var resultItem = document.getElementById("camera._listAccessPoints_result");
		if(jsonObj.state === OSC_JTAG_STATE_DONE)
		{
			resultItem.innerHTML = "<span class=\"paramvalue_ing\">connecting success!</span>";
			reqGetStaInfo();
			reqDevState();
		}
		else
		{
			resultItem.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
	}

	function reqGetStaInfo()
	{
		console.log("reqGetStaInfo");
		getStaInfo();
	}

	function respGetStaInfo(jsonObj)
	{
		console.log("respGetStaInfo");
		var span_listAccessPoints_ssid = document.getElementById("_listAccessPoints_ssid");
		span_listAccessPoints_ssid.innerHTML = jsonObj[OSC_JTAG_WIFI_SSID];
		var span_listAccessPoints_password = document.getElementById("_listAccessPoints_password");
		span_listAccessPoints_password.innerHTML = jsonObj[OSC_JTAG_WIFI_PWD];
		var span_listAccessPoints_mac = document.getElementById("_listAccessPoints_mac");
		span_listAccessPoints_mac.innerHTML = jsonObj[OSC_JTAG_WIFI_MAC];
		var span_listAccessPoints_status = document.getElementById("_listAccessPoints_status");
		span_listAccessPoints_status.innerHTML = jsonObj[OSC_JTAG_WIFI_STATUS];
	}

	function reqDisconnctSta()
	{
		if(gTagSetSta == 1)
		{
			alert("device is connecting~!");
			return;
		}

		if(gTagSetStaOff == 1)
		{
			alert("device is disconnecting~!");
			return;
		}

		var resultItem = document.getElementById("camera._listAccessPoints_result");
		resultItem.innerHTML = "<span class=\"paramvalue_ing\">disconnecting...</span>";
		console.log("reqDisconnctSta");
		gTagSetStaOff = 1;
		setStaInfo(0, "", "", "", 0);
	}

	function respDisconnectSta(jsonObj)
	{
		gTagSetStaOff = 0;
		if(jsonObj.state === OSC_JTAG_STATE_DONE)
		{
			reqGetStaInfo();
			var resultItem = document.getElementById("camera._listAccessPoints_result");
			resultItem.innerHTML = "";
			reqDevState();
		}
		else
		{
			var resultItem = document.getElementById("camera._listAccessPoints_result");
			resultItem.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
	}

/*----- _listAccessPoints End -----*/

/*----- _apInfo Start -----*/
	function reqGetApInfo()
	{
		console.log("reqGetApInfo");
		getApInfo();
	}

	function respGetApInfo(jsonObj)
	{
		console.log("respGetApInfo");
		var span_apInfo_ssid = document.getElementById("_apInfo_ssid");
		span_apInfo_ssid.value = jsonObj[OSC_JTAG_WIFI_SSID];
		var span_apInfo_password = document.getElementById("_apInfo_password");
		span_apInfo_password.value = jsonObj[OSC_JTAG_WIFI_PWD];
		var span_apInfo_mac = document.getElementById("_apInfo_mac");
		span_apInfo_mac.innerHTML = jsonObj[OSC_JTAG_WIFI_MAC];
	}

	var gTagSetAp = 0;

	function reqSetApInfo()
	{
		if(gTagSetAp == 1)
		{
			alert("Ap is setting!");
			return;
		}
		console.log("reqSetApInfo");
		var span_apInfo_ssid = document.getElementById("_apInfo_ssid");
		var ssid = span_apInfo_ssid.value;
		var span_apInfo_password = document.getElementById("_apInfo_password");
		var pwd = span_apInfo_password.value;
		gTagSetAp = 1;
		setApInfo(ssid, pwd);
	}

	function respSetApInfo(jsonObj)
	{
		console.log("respSetApInfo");
		var resultItem = document.getElementById("_apInfo_result");
		if(jsonObj.state === OSC_JTAG_STATE_DONE)
		{
			resultItem.innerHTML = "<span class=\"paramvalue_ing\"> set success, please reboot! </span>";
			reqDevState();
		}
		else
		{
			resultItem.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
		gTagSetAp = 0;
		reqGetApInfo();
	}

/*----- _aoInfo End -----*/

/*----- _resolution Start -----*/

	function reqGetResolution()
	{
		console.log("reqGetResolution");
		getResolution();
	}

	function respGetResolution(jsonObj)
	{
		var _resolution_select = document.getElementById("_resolution_select");
		for (var i = 0; i < _resolution_select.options.length; i++){  
			if (_resolution_select.options[i].innerHTML == jsonObj){  
				_resolution_select.options[i].selected = true;  
				break;  
			}  
		} 
	}

	function reqSetResolution()
	{
		var _resolution_select = document.getElementById("_resolution_select");
		var index = 0;
		for (var i = 0; i < _resolution_select.options.length; i++){  
			if(_resolution_select.options[i].selected == true){
				index = i;
				break;
			}
		}
		setResolution(index);
	}

/*----- _resolution End -----*/

/*----- camera._getLivePreviewUrl start -----*/
	function reqGetLivePreviewUrl()
	{
		console.log("reqGetLivePreviewUrl");
		getLivePreviewUrl();
	}

	function respGetLivePreviewUrl(jsonObj)
	{
		console.log("respGetLivePreviewUrl");
		var resultItem = document.getElementById("_getLivePreviewUrl_result");
		if(jsonObj.state == OSC_JTAG_STATE_DONE)
		{
			resultItem.innerHTML = "<span class=\"paramvalue_ing\">" + jsonObj.results.path + "</span>";
		}
		else
		{
			resultItem.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
	}
/*----- camera._getLivePreviewUrl End -----*/

/*----- camera._shutdown start -----*/
	function reqShutdown()
	{
		console.log("reqShutdown");
		devShutdown();
	}

	function respShutdown(jsonObj)
	{
		console.log("respShutdown");
		var resultItem = document.getElementById("_shutdown_result");
		if(jsonObj.state == OSC_JTAG_STATE_DONE)
		{
			resultItem.innerHTML = "<span class=\"paramvalue_ing\"> bye bye! </span>";
		}
		else
		{
			resultItem.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
	}
/*----- camera._shutdown End -----*/

/*----- camera._reboot start -----*/
	function reqReboot()
	{
		console.log("reqReboot");
		devReboot();
	}

	function respReboot(jsonObj)
	{
		console.log("respReboot");
		var resultItem = document.getElementById("_reboot_result");
		if(jsonObj.state == OSC_JTAG_STATE_DONE)
		{
			resultItem.innerHTML = "<span class=\"paramvalue_ing\"> now reboot !!</span>";
		}
		else
		{
			resultItem.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
	}
/*----- camera._reboot End -----*/

/*----- camera._getIMUData start -----*/
	function reqGetIMUData()
	{
		console.log("reqGetIMUData");
		getIMUData();
	}

	function respGetIMUData(jsonObj)
	{
		console.log("respGetIMUData");
		var resultItem = document.getElementById("_getIMUData_result");
		if(jsonObj.state == OSC_JTAG_STATE_DONE)
		{
			resultItem.innerHTML = "<span class=\"paramvalue_ing\">" + jsonObj.results.imu + "</span>";
		}
		else
		{
			resultItem.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
	}
/*----- camera._getIMUData End -----*/

/*----- camera._setMesureLight start -----*/
	function reqSetMesureLight()
	{
		console.log("reqSetMesureLight");
		var resultItem = document.getElementById("_setMesureLight_result");
		resultItem.innerHTML = "<span class=\"paramvalue_ing\">setting MeasureLight</span>";
		setMesureLight();
	}

	function respSetMesureLight(jsonObj)
	{
		console.log("respSetMesureLight");
		var resultItem = document.getElementById("_setMesureLight_result");
		if(jsonObj.state == OSC_JTAG_STATE_DONE)
		{
			resultItem.innerHTML = "<span class=\"paramvalue_ing\">set success!</span>";
			reqGetAeParams();
		}
		else
		{
			resultItem.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
	}
/*----- camera._setMesureLight End -----*/

/*----- camera._resetCamIndex start -----*/
	function reqResetCamIndex()
	{
		console.log("reqResetCamIndex");
		var resultItem = document.getElementById("_resetCamIndex_result");
		resultItem.innerHTML = "<span class=\"paramvalue_ing\">resetting cam index</span>";
		resetCamIndex();
	}

	function respResetCamIndex(jsonObj)
	{
		console.log("respResetCamIndex");
		var resultItem = document.getElementById("_resetCamIndex_result");
		if(jsonObj.state == OSC_JTAG_STATE_DONE)
		{
			resultItem.innerHTML = "<span class=\"paramvalue_ing\">set success!</span>";
		}
		else
		{
			resultItem.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
	}
/*----- camera._resetCamIndex End -----*/

/*----- camera._format start -----*/
	function reqFormat()
	{
		console.log("reqFormat");
		var resultItem = document.getElementById("_format_result");
		resultItem.innerHTML = "<span class=\"paramvalue_ing\">formatting...</span>";
		devformat();
	}

	function respFormat(jsonObj)
	{
		console.log("respFormat");
		var resultItem = document.getElementById("_format_result");
		if(jsonObj.state == OSC_JTAG_STATE_DONE)
		{
			resultItem.innerHTML = "<span class=\"paramvalue_ing\">format success!</span>";
			listFiles("/mnt/DCIM");
		}
		else
		{
			resultItem.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
	}

/*----- camera._format End -----*/

/*----- camera._keepalive start -----*/

function reqKeepAlive()
{
	console.log("reqKeepAlive");
	var resultItem = document.getElementById("_keepalive_result");
	resultItem.innerHTML = "<span class=\"paramvalue_ing\">getting keepalive...</span>";
	devKeepAlive();
}

function respKeepAlive(jsonObj)
{
	console.log("respKeepAlive");
	var resultItem = document.getElementById("_keepalive_result");
	if(jsonObj.state == OSC_JTAG_STATE_DONE)
	{
		resultItem.innerHTML = "<span class=\"paramvalue_ing\">" + JSON.stringify(jsonObj.results) + "</span>";
	}
	else
	{
		resultItem.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
	}
}
/*----- camera._keepalive end -----*/

/*----- camera._streamRate start -----*/

function reqStreamRate()
{
	console.log("reqStreamRate");
	var resultItem = document.getElementById("_streamRate_result");
	resultItem.innerHTML = "<span class=\"paramvalue_ing\">getting keepalive...</span>";
	getStreamRate();
}

function respStreamRate(jsonObj)
{
	console.log("respStreamRate");
	var resultItem = document.getElementById("_streamRate_result");
	if(jsonObj.state == OSC_JTAG_STATE_DONE)
	{
		resultItem.innerHTML = "<span class=\"paramvalue_ing\">" + JSON.stringify(jsonObj.results) + "</span>";
	}
	else
	{
		resultItem.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
	}
}
/*----- camera._streamRate end -----*/

/*----- _curLensIndex start -----*/
	function reqGetCurLensIndex()
	{
		console.log("reqGetCurLensIndex");
		getCurLensIndex();
	}

	function respGetCurLensIndex(jsonObj)
	{
		console.log("respGetCurLensIndex");
		var _curLensIndex_select = document.getElementById("_curLensIndex_select");
		for (var i = 0; i < _curLensIndex_select.options.length; i++){  
			if (_curLensIndex_select.options[i].innerHTML == jsonObj){  
				_curLensIndex_select.options[i].selected = true;  
				break;  
			}  
		}
	}
/*----- _curLensIndex End -----*/

/*----- offDelay Start -----*/

	function reqGetOffDelay()
	{
		console.log("reqGetOffDelay");
		getOffDelay();
	}

	function respGetOffDelay(jsonObj)
	{
		var offDelay_select = document.getElementById("offDelay_select");
		for (var i = 0; i < offDelay_select.options.length; i++){  
			if (offDelay_select.options[i].innerHTML == jsonObj){  
				offDelay_select.options[i].selected = true;  
				break;  
			}  
		} 
	}

	function reqSetOffDelay()
	{
		var offDelay_select = document.getElementById("offDelay_select");
		var index = 0;
		for (var i = 0; i < offDelay_select.options.length; i++){  
			if(offDelay_select.options[i].selected == true){
				index = parseInt(offDelay_select.options[i].innerHTML);
				break;
			}
		}
		setOffDelay(index);
	}

/*----- offDelay End -----*/

/*------ uploadFile start-------*/
	function uploadFileChange()
	{
		var inputfile = document.getElementById("uploadFile_choosefile");
		var uploadfilepaths = inputfile.value;
		var pos = uploadfilepaths.lastIndexOf("\\");
		var filename = uploadfilepaths.substring(pos + 1);
		var inputname = document.getElementById("uploadFile_localpath");
		inputname.value = filename;
	}

	function uploadFile()
	{
		 //get filesize
		var fileObj   = document.getElementById("uploadFile_choosefile").files;
		var fileSize  = fileObj[0].size;

		var uploadFile_select = document.getElementById("uploadFile_select");
		
		var pathname = "";
		for (var i = 0; i < uploadFile_select.options.length; i++){  
			if(uploadFile_select.options[i].selected == true){
				pathname = uploadFile_select.options[i].text;
				break;
			}
		}

		var filename = document.getElementById("uploadFile_localpath").value;
        console.log("upload name:" + filename + " fileSize:" + fileSize);
        var upload_url   = OSC_DEV_IP + "/upload";
        var actionurl = upload_url + "?path=" + pathname + "&name=" + filename + "&filesize=" + fileSize;
        console.log("upload url:" + actionurl);
        var form1 = document.getElementById("uploadFile_form");
        form1.action = actionurl;
        form1.submit();
	}
/*------ uploadFile end-------*/

/*------ camera._post start-------*/
	function reqGoPOST()
	{
		console.log("reqGoPOST");
		var resultView = document.getElementById("camera._post_result");
		resultView.innerHTML = "";
		goPOST();
	}

	function respGoPOST(jsonObj)
	{
		console.log("respGoPOST");
		var resultView = document.getElementById("camera._post_result");
		if(jsonObj.state === OSC_JTAG_STATE_DONE)
		{
			var resultStr = "<ul>";
			var i = -1;
			var tmpFileUrl;
			var tmpFileTypeName;
			var tmpFileName;

			for (var tmpFile in jsonObj.results.files) {

				i++;

				tmpFileName = jsonObj.results.files[i];

				tmpFileUrl  = OSC_DEV_IP + tmpFileName;

				tmpFileTypeName = getFileType(tmpFileName);
				if(tmpFileTypeName === "jpg" || tmpFileTypeName === "JPG" || tmpFileTypeName === "jpeg" || tmpFileTypeName === "JPEG" || tmpFileTypeName === "png" || tmpFileTypeName === "PNG")
				{
					resultStr += "<li>";
					resultStr += "<a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"onClickView('" + tmpFileName + "','" + tmpFileUrl + "')\">" + tmpFileName + "</a>";
					resultStr += "&nbsp;&nbsp;<a class=\"resultvalue\" href=\"" + tmpFileUrl +" \" target =\"_blank\">(download)</a>";
					resultStr += "</li>";
				}
				else
				{
					resultStr += "<li>";
					resultStr += "<a class=\"resultvalue\" href=\"javascript:void(0)\" onclick=\"\">" + tmpFileName + "</a>";
					resultStr += "&nbsp;&nbsp;<a class=\"resultvalue\" href=\"" + tmpFileUrl +" \" target =\"_blank\">(download)</a>";
					resultStr += "</li>";
				}
			}

			resultStr += "</ul>";
			resultView.innerHTML = resultStr;
			reqDevStatus();
		}
		else
		{
			alert(jsonObj.name + " -- " + jsonObj.error.code);
			resultView.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}

	}
/*------ camera._post end-------*/

/*------ camera._setWifiBand start-------*/
	function reqSetWifiBand()
	{
		console.log("reqSetWifiBand()");
		var _setWifiBand_select = document.getElementById("_setWifiBand_select");
		var wifiBand = "2.4G";
		for (var i = 0; i < _setWifiBand_select.options.length; i++){  
			if(_setWifiBand_select.options[i].selected == true)
			{
				wifiBand = _setWifiBand_select.options[i].value;
				break;
			}  
		}
		console.log("reqSetWifiBand() wifiBand:" + wifiBand);
		var resultItem = document.getElementById("camera._setWifiBand_result");
		resultItem.innerHTML = "<span class=\"paramvalue_ing\">setting...</span>";
		setWifiBand(wifiBand);
	}

	function respSetWifiBand(jsonObj)
	{
		console.log("respSetWifiBand()");
		var resultItem = document.getElementById("camera._setWifiBand_result");
		if(jsonObj.state == OSC_JTAG_STATE_DONE)
		{
			resultItem.innerHTML = "<span class=\"paramvalue_ing\">set success!</span>";
		}
		else
		{
			resultItem.innerHTML = "<span class=\"paramvalue_err\">" + jsonObj.error.code + "</span>";
		}
	}

	function reqGetWifiBand()
	{
		console.log("reqGetWifiBand()");
		getWifiBand();
	}

	function respGetWifiBand(jsonObj)
	{
		console.log("respGetWifiBand()");

		var _setWifiBand_select = document.getElementById("_setWifiBand_select");
		var wifiBand = "2.4G";
		for (var i = 0; i < _setWifiBand_select.options.length; i++){ 

			if (_setWifiBand_select.options[i].value == jsonObj.results[OSC_JTAG_WIFI_BAND])
			{
				_setWifiBand_select.options[i].selected = true;
			}
			else
			{
				_setWifiBand_select.options[i].selected = false;
			}
		}
	}

/*------ camera._setWifiBand end-------*/

</script>
<body>
	<style type="text/css">
		/*-----图片弹出框 start -----*/
		/* 触发弹窗图片的样式 */
		#myImg {
		    border-radius: 5px;
		    cursor: pointer;
		    transition: 0.3s;
		}
 
		#myImg:hover {opacity: 0.7;}
		 
		/* 弹窗背景 */
		.modal {
		    display: none; /* Hidden by default */
		    position: fixed; /* Stay in place */
		    z-index: 1; /* Sit on top */
		    padding-top: 100px; /* Location of the box */
		    left: 0;
		    top: 0;
		    width: 100%; /* Full width */
		    height: 100%; /* Full height */
		    overflow: auto; /* Enable scroll if needed */
		    background-color: rgb(0,0,0); /* Fallback color */
		    background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
		}
		 
		/* 图片 */
		.modal-content {
		    margin: auto;
		    display: block;
		    width: 80%;
		    max-width: 700px;
		}
		 
		/* 文本内容 */
		#caption {
		    margin: auto;
		    display: block;
		    width: 80%;
		    max-width: 700px;
		    text-align: center;
		    color: #ccc;
		    padding: 10px 0;
		    height: 150px;
		}
		 
		/* 添加动画 */
		.modal-content, #caption { 
		    -webkit-animation-name: zoom;
		    -webkit-animation-duration: 0.6s;
		    animation-name: zoom;
		    animation-duration: 0.6s;
		}
		 
		@-webkit-keyframes zoom {
		    from {-webkit-transform:scale(0)} 
		    to {-webkit-transform:scale(1)}
		}
		 
		@keyframes zoom {
		    from {transform:scale(0)} 
		    to {transform:scale(1)}
		}
		 
		/* 关闭按钮 */
		.close {
		    position: absolute;
		    top: 15px;
		    right: 35px;
		    color: #f1f1f1;
		    font-size: 40px;
		    font-weight: bold;
		    transition: 0.3s;
		}
		 
		.close:hover,
		.close:focus {
		    color: #bbb;
		    text-decoration: none;
		    cursor: pointer;
		}
		 
		/* 小屏幕中图片宽度为 100% */
		@media only screen and (max-width: 700px){
		    .modal-content {
		        width: 100%;
		    }
		}
		/*-----图片弹出框 end -----*/

		.functionbg {
			border: 1px solid #000000; 
			padding: 10px;
			width: 600px;
		}

		.functionbtn {
			width: 200px;
			height: 40px;
			font-size: 15px;
			color:slateblue;
			font-weight: 800;
			border: 1px solid #000000; 
		}

		.paramname {
			color: black;
			font-style: italic;
			margin: 10px;
			font-size: 20px;
		}

		.paramvalue_err{
			color: red;
			font-style: italic;
			font-size: 20px;
		}

		.paramvalue_ing{
			color: blue;
			font-style: italic;
			font-size: 20px;
		}

		.paraminput{
			color:darkgreen;
			font-style: italic;
			font-weight: 800;
			width: 500px;
			height: 25px;
			font-size: 15px;
		}

		.resultvalue{
			font-style: italic;
		}

    </style>
	<h1>4DKK Web Debug <a href="./index.html"> (New Page)</a></h1>

	<div id="dev_info">
	</div>

	<div id="dev_state">
	</div>

	<div id="dev_status">
	</div>

	<div id="checkbox_functions" class="functionbg">
	</div>
<!-- Functions start-->
	<div id="functions">
		<!-- camera._captureAll start-->
		<div id="camera._captureAll" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">path:</span><input type="text" id="camera._captureAll_path" class="paraminput" value="/mnt/DCIM/tmp">
				</div>
				<br/>
				<div>
					<span class="paramname">HDR:</span> 
					<select id="camera._captureAll_hdr">
						<option value="0">0</option>
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
					</select>
				</div>
				<br/>
				<div>
					<span class="paramname">result:</span>
					<div id="camera._captureAll_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" id="camera._captureAll_btn" onclick="reqCapture('camera._captureAll')">captureAll</button>
				</div>
			</div>
		</div>
		<!-- camera._captureAll end-->

		<!-- camera._captureA start-->
		<div id="camera._captureA" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">path:</span><input type="text" id="camera._captureA_path" class="paraminput" value="/mnt/DCIM/tmp">
				</div>
				<br/>
				<div>
					<span class="paramname">HDR:</span> 
					<select id="camera._captureA_hdr">
						<option value="0">0</option>
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
					</select>
				</div>
				<br/>
				<div>
					<span class="paramname">result:</span>
					<div id="camera._captureA_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" id="camera._captureA_btn" onclick="reqCapture('camera._captureA')">captureA</button>
					<button class="functionbtn" id="camera._captureB_btn" onclick="reqCapture('camera._captureB')">captureB</button>
				</div>
			</div>
		</div>
		<!-- camera._captureA end-->

		<!-- camera._captureSingle start-->
		<div id="camera._captureSingle" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">path:</span><input type="text" id="camera._captureSingle_path" class="paraminput" value="/mnt/DCIM/tmp">
				</div>
				<div>
					<span class="paramname">nLens:</span> 
					<select id="camera._captureSingle_nLens">
						<option value="0">0</option>
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5</option>
						<option value="6">6</option>
						<option value="7">7</option>
					</select>
				</div>
				<br/>
				<div>
					<span class="paramname">result:</span>
					<div id="camera._captureSingle_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" id="camera._captureSingle_btn" onclick="reqCapture('camera._captureSingle')">captureSingle</button>
				</div>
			</div>
		</div>
		<!-- camera._captureSingle end-->

		<!-- camera._startRecord start-->
		<div id="camera._startRecord" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">path:</span><input type="text" id="camera._startRecord_path" class="paraminput" value="/mnt/DCIM/tmp">
				</div>
				<br/>
				<div>
					<span class="paramname">result:</span>
					<div id="camera._startRecord_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" id="camera._startRecord_btn" onclick="reqCapture('camera._startRecord')">startRecord</button>
					<button class="functionbtn" id="camera._stopRecord_btn" onclick="reqCapture('camera._stopRecord')">stopRecord</button>
				</div>
			</div>
		</div>
		<!-- camera._startRecord end-->

		<!-- camera.listFiles start-->
		<div id="camera.listFiles" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">path:</span><input type="text" id="camera.listFiles_path" class="paraminput" value="/mnt/DCIM">
				</div>
				<br/>
				<div>
					<span class="paramname">result:</span>
					<div id="camera.listFiles_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" id="camera.listFiles_btn" onclick="reqListFiles()">listFiles</button>
					<button class="functionbtn" id="camera._createDir_btn" onclick="reqCreateDir()">createDir</button>
					&nbsp;&nbsp;&nbsp;&nbsp;<a class="resultvalue" href="javascript:void(0)" onclick="fillPath()">Copy Path</a>
				</div>
			</div>
		</div>
		<!-- camera.listFiles end-->

		<!-- camera._format start-->
		<div id="camera._format" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">result:</span>
					<div id="_format_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" onclick="reqFormat()">_format</button>
				</div>
			</div>
		</div>
		<!-- camera._format end-->

		<!-- camera._keepalive start-->
		<div id="camera._keepalive" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">result:</span>
					<div id="_keepalive_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" onclick="reqKeepAlive()">_keepalive</button>
				</div>
			</div>
		</div>
		<!-- camera._keepalive end-->

		<!-- camera._streamRate start-->
		<div id="camera._streamRate" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">result:</span>
					<div id="_streamRate_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" onclick="reqStreamRate()">_streamRate</button>
				</div>
			</div>
		</div>
		<!-- camera._streamRate end-->

		<!-- camera._findFile start-->
		<div id="camera._findFile" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">path:</span><input type="text" id="camera._findFile_path" class="paraminput" value="/mnt/DCIM">
				</div>
				<br/>
				<div>
					<span class="paramname">result:</span>
					<div id="camera._findFile_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" id="camera._findFile_btn" onclick="reqFindFile()">findFile</button>
				</div>
			</div>
		</div>
		<!-- camera._findFile end-->

		<!-- camera._getLivePreviewUrl start-->
		<div id="camera._getLivePreviewUrl" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">result:</span>
					<div id="_getLivePreviewUrl_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" onclick="reqGetLivePreviewUrl()">GET _getLivePreviewUrl</button>
				</div>
			</div>
		</div>
		<!-- camera._getLivePreviewUrl end-->

		<!-- camera._shutdown start-->
		<div id="camera._shutdown" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">result:</span>
					<div id="_shutdown_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" onclick="reqShutdown()">_shutdown</button>
				</div>
			</div>
		</div>
		<!-- camera._shutdown end-->

		<!-- camera._reboot start-->
		<div id="camera._reboot" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">result:</span>
					<div id="_reboot_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" onclick="reqReboot()">_reboot</button>
				</div>
			</div>
		</div>
		<!-- camera._reboot end-->

		<!-- camera._getIMUDate start-->
		<div id="camera._getIMUData" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">result:</span>
					<div id="_getIMUData_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" onclick="reqGetIMUData()">_getIMUData</button>
				</div>
			</div>
		</div>
		<!-- camera._getIMUDate end-->

		<!-- camera._setMesureLight start-->
		<div id="camera._setMesureLight" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">result:</span>
					<div id="_setMesureLight_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" onclick="reqSetMesureLight()">_setMesureLight</button>
				</div>
			</div>
		</div>
		<!-- camera._setMesureLight end-->

		<!-- camera._resetCamIndex start-->
		<div id="camera._resetCamIndex" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">result:</span>
					<div id="_resetCamIndex_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" onclick="reqResetCamIndex()">_resetCamIndex</button>
				</div>
			</div>
		</div>
		<!-- camera._resetCamIndex end-->

		<!-- _listAccessPoints start-->
		<div id="camera._listAccessPoints" style="display:none">
			<br/>
			<div class="functionbg">

				<div>
					<a class="resultvalue" href="javascript:void(0)" onclick="reqGetStaInfo()"><span class="paramname">Get _staInfo:</span></a>
					<br/>
					<span class="paramname">ssid:</span>
					<span class="paraminput" id="_listAccessPoints_ssid">4DAGE_2W_5G</span>
					<br/>
					<span class="paramname">password:</span>
					<span class="paraminput" id="_listAccessPoints_password">4DAGE168</span>
					<br/>
					<span class="paramname">mac:</span>
					<span class="paraminput" id="_listAccessPoints_mac">74:ee:2a:58:27:f8</span>
					<br/>
					<span class="paramname">status:</span>
					<span class="paraminput" id="_listAccessPoints_status">0</span>
				</div>
				<br/>
				<div>
					<span class="paramname">result:</span>
					<div id="camera._listAccessPoints_result"></div>
					<br/>
					<div id="camera._listAccessPoints_list"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn"  onclick="reqListAccessPoints()">_listAccessPoints</button>
					<button class="functionbtn"  onclick="reqDisconnctSta()">disconnect wifi</button>
				</div>
			</div>
		</div>
		<!-- _listAccessPoints end-->

		<!-- _aeParams start-->
		<div id="_aeParams" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">manualMode:</span>
					<input name="_aeParams_manualMode" type="radio" value="0" onchange="manualModeChange(this.value)" checked="checked"/><span class="paramname">off</span>
					<input name="_aeParams_manualMode" type="radio" value="1" onchange="manualModeChange(this.value)"/><span class="paramname">on</span>
				</div>
				<br/>

				<div id="div__aeParams_expMode" style="display: none;">
					<span class="paramname">expMode:</span>
					<input name="_aeParams_expMode" type="radio" value="0" onchange="expModeChange(this.value)" checked="checked"/><span class="paramname">off</span>
					<input name="_aeParams_expMode" type="radio" value="1" onchange="expModeChange(this.value)"/><span class="paramname">on</span>
				</div>
				<br/>

				<div id="div__aeParams_compensation" style="display: none;">
					<span class="paramname">compensation:</span>
					<input id="_aeParams_compensationSlider" type="range" min="-1.0" max="1.0" value="0" step="0.1" oninput="compensationSliderChange(this.value)" οnchange="compensationSliderChange(this.value)" />
					<span class="paramname" id="_aeParams_compensationValueText" >0</span>
				</div>
				<br/>

				<div id="div__aeParams_iso" style="display: none;">
					<span class="paramname">iso:</span>
					<input id="_aeParams_isoSlider" type="range" min="100" max="800" value="200" step="100" oninput="isoSliderChange(this.value)" οnchange="isoSliderChange(this.value)" />
					<span class="paramname" id="_aeParams_isoValueText">200</span>
				</div>
				<br/>

				<div id="div__aeParams_expTime" style="display: none;">
					<span class="paramname">expTime:</span>
					<div id="div_div__aeParams_expTime" style="display: inline;">
						<select id="_aeParams_expTime" onchange="expTimeChange(this)">
							<option value="0">1/3000S</option>
							<option value="1">1/2000S</option>
							<option value="2">1/1000S</option>
							<option value="3">1/500S</option>
							<option value="4">1/250S</option>
							<option value="5">1/125S</option>
							<option value="6">1/60S</option>
							<option value="7">1/30S</option>
							<option value="8">1/15S</option>
							<option value="9">1/8S</option>
							<option value="10">1/2S</option>
							<option value="11">1S</option>
						</select>
					</div>
					<div id="div_div__aeParams_expTimeValue" style="display: inline;">
						<select id="_aeParams_expTimeValue" disabled="true">
							<option value="330">330</option>
							<option value="500">500</option>
							<option value="1000">1000</option>
							<option value="2000">2000</option>
							<option value="4000">4000</option>
							<option value="8000">8000</option>
							<option value="16700">16700</option>
							<option value="33000">33000</option>
							<option value="66000">66000</option>
							<option value="125000">125000</option>
							<option value="500000">500000</option>
							<option value="1000000">1000000</option>
						</select>
					</div>
				</div>
				<br/>

				<div id="div__aeParams_colorTempratureManualMode" style="display: none;">
					<span class="paramname">colorTempratureManualMode:</span>
					<input name="_aeParams_colorTempratureManualMode" type="radio" value="0" onchange="colorTempratureManualModeChange(this.value)" checked="checked"/><span class="paramname">off</span>
					<input name="_aeParams_colorTempratureManualMode" type="radio" value="1" onchange="colorTempratureManualModeChange(this.value)"/><span class="paramname">on</span>
				</div>
				<br/>

				<div id="div__aeParams_colorTemprature" style="display: none;">
					<span class="paramname">colorTemprature:</span>
					<input id="_aeParams_colorTempratureSlider" type="range" min="2000" max="10000" value="3000" step="1" oninput="colorTempratureSliderChange(this.value)" οnchange="colorTempratureSliderChange(this.value)" />
					<span class="paramname" id="_aeParams_colorTempratureValueText">3000</span>
				</div>
				<br/>
				<div>
					<button class="functionbtn" id="_aeParams_btn" onclick="reqSetAEParams()">SET _aeParams</button>
					<button class="functionbtn" id="_aeParams_btn" onclick="reqGetAeParams()">GET _aeParams</button>
				</div>
			</div>
		</div>
		<!-- _aeParams end-->

		<!-- _dateTime start-->
		<div id="_dateTime" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<a class="resultvalue" href="javascript:void(0)" onclick="getNowTimeStamp()"><span class="paramname">Time:</span></a>
					<input type="text" id="_dateTime_timestamp" class="paraminput" value="1588262400" disabled="true"/><br/>
					<span class="paramname" id="_dateTime_timestamp_date">2020-05-01 00:00:00</span>
				</div>
				<br/>
				<div>
					<a class="resultvalue" href="javascript:void(0)" onclick="reqGetDateTime()"><span class="paramname">GET device time:</span></a>
					<span class="paramname" id="_dateTime_devicedatetime">2020-05-27 15:58:29</span>
				</div>
				<br/>
				<div>
					<span class="paramname">timeZone:</span>
					<select id="_dateTime_timeZone">
						<option value="0">GMT-12:00</option>
						<option value="1">GMT-11:00</option>
						<option value="2">GMT-10:00</option>
						<option value="3">GMT-09:00</option>
						<option value="4">GMT-08:00</option>
						<option value="5">GMT-07:00</option>
						<option value="6">GMT-06:00</option>
						<option value="7">GMT-05:00</option>
						<option value="8">GMT-04:30</option>
						<option value="9">GMT-04:00</option>

						<option value="10">GMT-03:30</option>
						<option value="11">GMT-03:00</option>
						<option value="12">GMT-02:00</option>
						<option value="13">GMT-01:00</option>
						<option value="14">GMT+00:00</option>
						<option value="15">GMT+01:00</option>
						<option value="16">GMT+02:00</option>
						<option value="17">GMT+03:00</option>
						<option value="18">GMT+03:30</option>
						<option value="19">GMT+04:00</option>

						<option value="20">GMT+04:30</option>
						<option value="21">GMT+05:00</option>
						<option value="22">GMT+05:30</option>
						<option value="23">GMT+05:45</option>
						<option value="24">GMT+06:00</option>
						<option value="25">GMT+06:30</option>
						<option value="26">GMT+07:00</option>
						<option value="27">GMT+08:00</option>
						<option value="28">GMT+09:00</option>
						<option value="29">GMT+09:30</option>

						<option value="30">GMT+10:00</option>
						<option value="31">GMT+11:00</option>
						<option value="32">GMT+12:00</option>
						<option value="33">GMT+13:00</option>
					</select>
				</div>
				<br/>
				<div>
					<a class="resultvalue" href="javascript:void(0)" onclick="reqGetTimezone()"><span class="paramname">GET device timezone:</span></a>
					<span class="paramname" id="_dateTime_devicetimezone">GMT+08:00</span>
				</div>
				<br/>
				<div>
					<button class="functionbtn" onclick="reqSetDateTime()">SET _dateTime</button>
					<button class="functionbtn" onclick="reqSetTimezone()">SET _timeZoneValue</button>
				</div>
			</div>
			
		</div>
		<!-- _dateTime end-->

		<!-- _apInfo start-->
		<div id="_apInfo" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">ssid:</span><input type="text" id="_apInfo_ssid" class="paraminput" value="4DAGE_2W_5G">
				</div>
				<br/>
				<div>
					<span class="paramname">pwd:</span><input type="text" id="_apInfo_password" class="paraminput" value="4DAGE168">
				</div>
				<br/>
				<div>
					<span class="paramname">mac:</span><span class="paramname" id="_apInfo_mac">74:ee:2a:58:27:f8</span>
				</div>
				<br/>
				<div>
					<span class="paramname">result:</span>
					<div id="_apInfo_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" onclick="reqGetApInfo()">GET _apInfo</button>
					<button class="functionbtn" onclick="reqSetApInfo()">SET _apInfo</button>
				</div>
			</div>
		</div>
		<!-- camera._apInfo end-->

		<!-- _resolution start-->
		<div id="_resolution" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">_resolution:</span> 
					<select id="_resolution_select">
						<option value="0">0</option>
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5</option>
					</select>
				</div>
				<br/>
				<div>
					<button class="functionbtn" onclick="reqGetResolution()">GET _resolution</button>
					<button class="functionbtn" onclick="reqSetResolution()">SET _resolution</button>
				</div>
			</div>
		</div>
		<!-- _resolution end-->

		<!-- _curLensIndex start-->
		<div id="_curLensIndex" style="display:none">
			<br/>
			<div class="functionbg">
				<span class="paramname">_curLensIndex:</span> 
				<select id="_curLensIndex_select" disabled="true">
					<option value="0">0</option>
					<option value="1">1</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5</option>
					<option value="6">6</option>
					<option value="7">7</option>
				</select>
				<br/>
				<br/>
				<div>
					<button class="functionbtn" onclick="reqGetCurLensIndex()">GET _curLensIndex</button>
				</div>
			</div>
		</div>
		<!-- _curLensIndex end-->

		<!-- offDelay start-->
		<div id="offDelay" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">offDelay:</span> 
					<select id="offDelay_select">
						<option value="0">0</option>
						<option value="5">5</option>
						<option value="10">10</option>
						<option value="30">30</option>
					</select>
				</div>
				<br/>
				<div>
					<button class="functionbtn" onclick="reqGetOffDelay()">GET offDelay</button>
					<button class="functionbtn" onclick="reqSetOffDelay()">SET offDelay</button>
				</div>
			</div>
		</div>
		<!-- offDelay end-->

		<!-- uploadFile start-->
		<div id="uploadFile" style="display:none">
			<form id="uploadFile_form" role="form" action="", method="POST" enctype="multipart/form-data">
				<br/>
				<div class="functionbg">
					<div>
						<span class="paramname">allow_path:</span> 
						<select id="uploadFile_select">
							<option value="/mnt/DCIM">/mnt/DCIM</option>
							<option value="/opt">/opt</option>
							<option value="/opt/web">/opt/web</option>
						</select>
					</div>
					<br/>
					<div>
						<input  type="file" id="uploadFile_choosefile" name="file" onchange="uploadFileChange()"/>
					</div>
					<br/>
					<div>
						<span class="paramname">local:</span><input type="text" id="uploadFile_localpath" class="paraminput" value="" readonly="readonly"/>
					</div>
					<br/>
					<!-- <div>
						<span class="paramname">result:</span>
						<div id="uploadFile_result"></div>
					</div>
					<br/> -->
					<div>
						<button class="functionbtn" id="uploadFile_btn" onclick="uploadFile()">uploadFile</button>
					</div>
				</div>
		    </form>
		</div>
		<!-- uploadFile end-->

		<!-- camera._post start-->
		<div id="camera._post" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">result:</span>
					<div id="camera._post_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" id="camera._post_btn" onclick="reqGoPOST()">_post</button>
				</div>
			</div>
		</div>
		<!-- camera._startRecord end-->

		<!-- camera._setWifiBand start-->
		<div id="camera._setWifiBand" style="display:none">
			<br/>
			<div class="functionbg">
				<div>
					<span class="paramname">wifiBand:</span> 
					<select id="_setWifiBand_select">
						<option value="2.4G">2.4G</option>
						<option value="5G">5G</option>
					</select>
				</div>
				<div>
					<span class="paramname">result:</span>
					<div id="camera._setWifiBand_result"></div>
				</div>
				<br/>
				<div>
					<button class="functionbtn" id="camera._getWifiBand_btn" onclick="reqGetWifiBand()">_getWifiBand</button>
					<button class="functionbtn" id="camera._setWifiBand_btn" onclick="reqSetWifiBand()">_setWifiBand</button>
				</div>
			</div>
		</div>
		<!-- camera._setWifiBand end-->

	</div>
<!-- Functions end-->	
	</br>
<!-- 底部log start-->
	<div>
		<button onclick="clearLog()">Clear Log</button>
	</div>
	<div>
		<textarea id="logArea" rows="30" cols="100" disabled="true"></textarea>
	</div>
<!-- 底部log end-->

<!-- 图片弹出框 start -->
	<!-- 弹窗 -->
	<div id="myModal" class="modal">
	 
		<!-- 关闭按钮 -->
		<span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>
	   
		<!-- 弹窗内容 -->
		<img class="modal-content" id="img01" >
	   
		<!-- 文本描述 -->
		<div id="caption"></div>
  
	</div>
<!-- 图片弹出框 end -->
</body>
</html>